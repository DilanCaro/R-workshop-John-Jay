# Workshop 1 {-}

## Exercise solutions {-}

## Exercise 1 {-}

Run the following code, then use typeof(), class() functions to find out the data type and/or class object. 

```{r}
my_numeric <- 42.5
John_jay <- "university"
my_logical <- TRUE
my_date <- as.Date("05/29/2018", "%m/%d/%Y")
# for date
typeof(my_date)
class(my_date)
# for numeric
typeof(my_numeric)
class(my_numeric)
# for char
typeof(John_jay)
class(John_jay)
#for logical
typeof(my_logical)
class(my_logical)
```


### Exercise 2  {-}

Create 1 datatype of each: Character, numeric, integer, complex, Boolean

The answers may vary . Below an example of a solution,

```{r}

Best_university_in_nyc <- "John Jay"
Best_university_in_nyc
My_gpa <- 3.78
My_gpa
My_int_gpa <- as.integer(My_gpa)
My_int_gpa
my_complex_gpa<- 3.78+2i
my_complex_gpa
do_I_like_chocolate_ice_cream <- FALSE
do_I_like_chocolate_ice_cream

my_elements =list(Best_university_in_nyc,My_gpa,My_int_gpa,my_complex_gpa,do_I_like_chocolate_ice_cream)

# Check the classes of each element
for (element in my_elements) {
  print(class(element))
}
```
## Part III {-}

## Exercise 1 {-}

### Exercise 1: {-}

1. Create a vector of your favorite numbers.
2. Access the third element in your vector.
3. Create a new vector that is the square of each element in the original vector.


Create a vector of your favorite numbers.

```{r}
my_favorite_numbers <- c(7,22,17,19)
```

Access the third element in your vector. 

```{r}
my_favorite_numbers[3]
```

Note that R starts indexing from 1. This is somewhat more natural since we start counting at 1 . However, most programming languages start indexing at 0, that is, to access the third element it would be `my_favorite_numbers[2]` in a language like python . 

Create a new vector that is the square of each element in the original vector.

```{r}
square_favorite_numbers<- my_favorite_numbers^2
square_favorite_numbers
```


```{r}
my_vector <- c("Dilan Caro", "Instructor")
names(my_vector) <- c("Name", "Profession")
my_vector
```

Inspect my_vector using: 
the attributes(), the length() and the str() function 

```{r}
attributes(my_vector)
```

```{r}
length(my_vector)
```
```{r}
names(my_vector)
```

## Exercise 2 {-}

1. Create a data frame with at least three columns and four rows.
1. Print the number of rows and columns of your data frame.
1. Display summary statistics of your data frame.

### Create a data frame with at least three columns and four rows. {-}

```{r}
df <- data.frame(
  Subject = c("Art", "Bayesian", "Machine learning", "Stochastic"),
  Grade =c(100,87,90,75),
  Difficulty =c(6,9,8,10)# from 0 to 5 , 5 being the most difficuly
  )
print(df)
```

### Print the number of rows and columns of your data frame. {-}

```{r}
print(dim(df)) 
```

That shows 4 rows, and 3 columns 

### Display summary statistics of your data frame. {-}

```{r}
print(summary(df))
```



## Exercise 3 {-}
Inspect a built-in data frame
```{r}
mtcars
str(mtcars)
head(mtcars)
```

Get summary from a variable in a dataframe

```{r}
summary(mtcars$cyl) # use $ to extract variable from a data frame
```

Now inspect a tibble

```{r}
library(ggplot2)
diamonds
str(diamonds)  # built-in in library ggplot2
head(diamonds)
summary(diamonds$depth)
```

## Exercise 4 {-}

1. Create a vector `fav_music` with the names of your favorite artists.
2. Create a vector `num_records` with the number of records you have in
your collection of each of those artists.
3. Create a vector `num_concerts` with the number of times you attended a concert of these artists.
4. Put everything together in a data frame, assign the name `my_music` to this data frame and change the labels of the information stored in the columns to `artist`, `records` and `concerts.`
5. Extract the variable `num_records` from the data frame `my_music.`
6. Calculate the total number of records in your collection (for the defined
set of artists).
7. Check the structure of the data frame, ask for a `summary.`

```{r}
fav_music <- c("Prince", "REM", "Ryan Adams", "BLOF")
num_concerts <- c(0, 3, 1, 0)
num_records <- c(2, 7, 5, 1)
my_music <- data.frame(fav_music, num_concerts, num_records)
names(my_music) <- c("artist", "concerts", "records")
summary(my_music)
my_music$records
sum(my_music$records)
```


### Import other data formats {-}

The `haven` package enables R to read and write various data formats used by other statistical packages. 

It supports:

- SAS: `read_sas()` reads .sas7bdat and .sas7bcat files and `read_xpt()` reads SAS transport files. write_sas() writes .sas7bdat files.
- SPSS: `read_sav()` reads .sav files and `read_por()` reads the older .por files. write_sav() writes .sav files.
- Stata: `read_dta()` reads .dta files. `write_dta()` writes .dta files.

### Exercise 5 {-}

Load the following data sets, available in the course material: 
- the Danish fire insurance losses, stored in `danish.txt`
- the severity data set, stored in `severity.sas7bdat`.

```{r}
path <- file.path('/Users/dilancaro/Library/Mobile Documents/com~apple~CloudDocs/Workshops/John Jay/R Workshop/R-workshop-John-Jay/John Jay Workshop Data/')
path.danish <- file.path(path, "danish.txt")
danish <- read.table(path.danish, header = TRUE)
danish$Date <- as.Date(danish$Date, "%m/%d/%Y")
str(danish)
```

```{r}
library(haven)
severity <- read_sas('/Users/dilancaro/Library/Mobile Documents/com~apple~CloudDocs/Workshops/John Jay/R Workshop/R-workshop-John-Jay/John Jay Workshop Data/severity.sas7bdat')
str(severity)

```

## Part IV {-}

## Exercises {-}

1. Subsetting Data Frames

Create a data frame named student_info with the following columns and data:
- student_id (1 to 5)
- student_name ('Alice', 'Bob', 'Charlie', 'David', 'Eva')
- student_age (25, 30, 22, 28, 24)
- student_grade ('A', 'B', 'A', 'C', 'B')

Write a command to subset this data frame to include only students older than 24.

2. Using Conditional Filters

- Use the subset() function to find all students with a grade of 'A'.
- Display the names and ages of these students.

3. Manipulating Data with dplyr

- Load the dplyr package and convert student_info to a tibble.

- Use filter() and select() to show the name and age of students who have a grade better than 'B'.

4. Adding and Removing Columns

- Add a new column student_major with values ('Math', 'Science', 'Arts', 'Math', 'Science') to student_info.
- Then, remove the student_grade column using dplyr.

5. Renaming Columns

-  Rename the student_name column to name using base R functions and then using dplyr.

6. Complex dplyr Operations

- Create a new tibble from student_info that includes all students except those studying 'Arts', rename the student_id column to id, and arrange the students by age in descending order.

7. Exploratory Data Analysis with dplyr

- Calculate the average age of students grouped by their major using group_by() and summarize() in dplyr.

```{r}
# Exercise 1: Subsetting Data Frames
student_info <- data.frame(
  student_id = 1:5,
  student_name = c("Alice", "Bob", "Charlie", "David", "Eva"),
  student_age = c(25, 30, 22, 28, 24),
  student_grade = c('A', 'B', 'A', 'C', 'B')
)
older_students <- subset(student_info, student_age > 24)
```

```{r}

# Exercise 2: Using Conditional Filters

grade_a_students <- subset(student_info, student_grade == 'A', select = c(student_name, student_age))
```


```{r}
# Exercise 3: Manipulating Data with dplyr
library(dplyr)
student_info <- as_tibble(student_info)
good_students <- student_info %>% filter(student_grade > 'B') %>% select(student_name, student_age)
```


```{r}
# Exercise 4: Adding and Removing Columns
student_info <- mutate(student_info, student_major = c('Math', 'Science', 'Arts', 'Math', 'Science'))
student_info <- select(student_info, -student_grade)
```


```{r}
# Exercise 5: Renaming Columns
student_info <- data.frame(
  student_id = 1:5,
  student_name = c("Alice", "Bob", "Charlie", "David", "Eva"),
  student_age = c(25, 30, 22, 28, 24),
  student_grade = c('A', 'B', 'A', 'C', 'B')
)

names(student_info)[names(student_info) == "student_name"] <- "name"

student_info <- data.frame(
  student_id = 1:5,
  student_name = c("Alice", "Bob", "Charlie", "David", "Eva"),
  student_age = c(25, 30, 22, 28, 24),
  student_grade = c('A', 'B', 'A', 'C', 'B')
)
student_info <- rename(student_info, name = student_name)
```


```{r}
student_info <- data.frame(
  student_id = 1:5,
  student_name = c("Alice", "Bob", "Charlie", "David", "Eva"),
  student_age = c(25, 30, 22, 28, 24),
  student_grade = c('A', 'B', 'A', 'C', 'B')
)

# Exercise 6: Complex dplyr Operations
student_info <- mutate(student_info, student_major = c('Math', 'Science', 'Arts', 'Math', 'Science'))
student_info <- select(student_info, -student_grade)

filtered_info <- student_info %>%
  filter(student_major != "Arts") %>%
  rename(id = student_id) %>%
  arrange(desc(student_age))
```


```{r}
# Exercise 7: Exploratory Data Analysis with dplyr
average_age_by_major <- student_info %>%
  group_by(student_major) %>%
  summarise(average_age = mean(student_age))

```

## Part V {-}

###  Basic Data Visualization {-}

### Exercise 1 {-}

Making a Scatter plot:

- load the journals.txt data set and save as Journals data frame
- Work through the following instructions


```{r}
Journals<-read.table("~/Library/Mobile Documents/com~apple~CloudDocs/Workshops/John Jay/R Workshop/R-workshop-John-Jay/John Jay Workshop Data/journals.txt")

str(Journals)

```

```{r}
plot(log(Journals$subs), log(Journals$price))
rug(log(Journals$subs))
rug(log(Journals$price), side = 2)
```

```{r}
plot(log(Journals$price) ~ log(Journals$subs), pch = 19,
     col = "blue", xlim = c(0, 7), ylim = c(3, 8),
     main = "Library subscriptions")
rug(log(Journals$subs))
rug(log(Journals$price), side=2)

```


###  Exercise 2 {-}

Now, try creating your own visualization using the iris dataset. Here's what you can do:

1. Create a scatter plot using Petal.Length and Petal.Width from the iris dataset.
2. Color the points based on the Species column to differentiate between the species.
3. Add a title, x-axis label, and y-axis label to your plot.
Include a legend that indicates which color corresponds to which iris species.

```{r}

data(iris)

# Create the scatter plot
plot(iris$Petal.Length, iris$Petal.Width, col=as.factor(iris$Species),
     main="Iris Petal Measurements",
     xlab="Petal Length", ylab="Petal Width",
     pch=19)

# Add a legend
legend("topright", legend=levels(iris$Species), col=1:length(levels(iris$Species)), pch=19)

```
## Example 4 {-}

Explanation:

`iris$Sepal.Length`: This selects the Sepal.Length column from the iris dataset as the x-coordinates for the plot.
`iris$Sepal.Width`: This selects the Sepal.Width column from the iris dataset as the y-coordinates for the plot.
`col=iris$Species`: This assigns colors to the points based on the Species column, which means that each species will have a different color in the plot.
`main`: Sets the title of the plot to "Iris Sepal Measurements".
`xlab`: Sets the label for the x-axis to "Sepal Length".
`ylab`: Sets the label for the y-axis to "Sepal Width".
`pch=19`: Sets the plotting character (or point symbol) to a solid circle.

