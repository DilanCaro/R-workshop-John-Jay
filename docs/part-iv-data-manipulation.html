<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Part IV: Data Manipulation | R Workshop</title>
<meta name="author" content="Dilan Morales Caro">
<meta name="description" content="Subsetting and filtering data Subsetting and filtering data involve selecting specific elements, rows, or columns from a dataset based on certain conditions or criteria. In R, subsetting can be...">
<meta name="generator" content="bookdown 0.37 with bs4_book()">
<meta property="og:title" content="Part IV: Data Manipulation | R Workshop">
<meta property="og:type" content="book">
<meta property="og:url" content="https://dilancaro.github.io/R-workshop-John-Jay/part-iv-data-manipulation.html">
<meta property="og:description" content="Subsetting and filtering data Subsetting and filtering data involve selecting specific elements, rows, or columns from a dataset based on certain conditions or criteria. In R, subsetting can be...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Part IV: Data Manipulation | R Workshop">
<meta name="twitter:description" content="Subsetting and filtering data Subsetting and filtering data involve selecting specific elements, rows, or columns from a dataset based on certain conditions or criteria. In R, subsetting can be...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.0/transition.js"></script><script src="libs/bs3compat-0.6.0/tabs.js"></script><script src="libs/bs3compat-0.6.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Workshop</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="r-basics.html">R Basics</a></li>
<li><a class="" href="part-i-introduction-to-r.html">Part I: Introduction to R</a></li>
<li><a class="" href="part-ii-r-fundamentals.html">Part II: R Fundamentals</a></li>
<li><a class="" href="part-iii-data-structures.html">Part III: Data Structures</a></li>
<li><a class="active" href="part-iv-data-manipulation.html">Part IV: Data Manipulation</a></li>
<li><a class="" href="part-v-basic-data-visualization.html">Part V: Basic Data Visualization</a></li>
<li><a class="" href="intermediate-r.html">Intermediate R</a></li>
<li><a class="" href="part-i-functions-and-control-structures.html">Part I: Functions and Control Structures</a></li>
<li><a class="" href="part-ii-data-wrangling.html">Part II: Data Wrangling</a></li>
<li><a class="" href="intermediate-r-ii.html">Intermediate R II</a></li>
<li><a class="" href="part-i-advanced-data-visualization.html">Part I: Advanced Data Visualization</a></li>
<li><a class="" href="part-ii-statistical-analysis.html">Part II: Statistical Analysis</a></li>
<li><a class="" href="optional-part-v-working-with-dates-and-times-20-minutes.html">(Optional) Part V: Working with Dates and Times (20 minutes)</a></li>
<li><a class="" href="workshop-1-suplementary-exercises.html">Workshop 1: Suplementary Exercises</a></li>
<li><a class="" href="workshop-1-suplementary-exercises-1.html">Workshop 1: Suplementary Exercises</a></li>
<li><a class="" href="part-i-advanced-data-manipulation-with-dplyr-30-minutes.html">Part I: Advanced Data Manipulation with dplyr (30 minutes)</a></li>
<li><a class="" href="part-ii-text-data-processing-30-minutes.html">Part II: Text Data Processing (30 minutes)</a></li>
<li><a class="" href="part-iii-building-predictive-models-30-minutes.html">Part III: Building Predictive Models (30 minutes)</a></li>
<li><a class="" href="optional-part-v-version-control-and-collaboration-10-minutes.html">(Optional) Part V: Version Control and Collaboration (10 minutes)</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DilanCaro/R-workshop-John-Jay">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="part-iv-data-manipulation" class="section level1 unnumbered">
<h1>Part IV: Data Manipulation<a class="anchor" aria-label="anchor" href="#part-iv-data-manipulation"><i class="fas fa-link"></i></a>
</h1>
<div id="subsetting-and-filtering-data" class="section level2 unnumbered">
<h2>Subsetting and filtering data<a class="anchor" aria-label="anchor" href="#subsetting-and-filtering-data"><i class="fas fa-link"></i></a>
</h2>
<p>Subsetting and filtering data involve selecting specific elements, rows, or columns from a dataset based on certain conditions or criteria. In R, subsetting can be achieved using square brackets <code>[]</code>, the <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> function, or dplyr package functions like <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> for rows and <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> for columns. Filtering refers more specifically to choosing rows that meet certain conditions, such as values within a range or matching specific characteristics.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creating a sample data frame</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"David"</span>, <span class="st">"Eva"</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">22</span>, <span class="fl">28</span>, <span class="fl">24</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Subsetting by a specific column</span></span>
<span><span class="va">ages</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">age</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 25 30 22 28 24</span></span>
<span></span>
<span><span class="co"># Filtering data based on a condition</span></span>
<span><span class="va">young_adults</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">young_adults</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age</span></span>
<span><span class="co">#&gt; 1  1   Alice  25</span></span>
<span><span class="co">#&gt; 3  3 Charlie  22</span></span>
<span><span class="co">#&gt; 4  4   David  28</span></span>
<span><span class="co">#&gt; 5  5     Eva  24</span></span></code></pre></div>
<div id="using-the-dplyr-package" class="section level3 unnumbered">
<h3>Using the dplyr package<a class="anchor" aria-label="anchor" href="#using-the-dplyr-package"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>%&gt;%</code> symbol in R is known as the pipe operator, and it’s used to pass the result of one expression as the first argument to the next expression</p>
<ol style="list-style-type: decimal">
<li>Filtering data using dplyr for individuals younger than 30</li>
</ol>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="va">young_adults</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">young_adults</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age</span></span>
<span><span class="co">#&gt; 1  1   Alice  25</span></span>
<span><span class="co">#&gt; 2  3 Charlie  22</span></span>
<span><span class="co">#&gt; 3  4   David  28</span></span>
<span><span class="co">#&gt; 4  5     Eva  24</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Subsetting columns using dplyr</li>
</ol>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ages</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span></span>
<span><span class="co">#&gt;   age</span></span>
<span><span class="co">#&gt; 1  25</span></span>
<span><span class="co">#&gt; 2  30</span></span>
<span><span class="co">#&gt; 3  22</span></span>
<span><span class="co">#&gt; 4  28</span></span>
<span><span class="co">#&gt; 5  24</span></span></code></pre></div>
</div>
</div>
<div id="adding-removing-and-renaming-columns" class="section level2 unnumbered">
<h2>Adding, removing, and renaming columns<a class="anchor" aria-label="anchor" href="#adding-removing-and-renaming-columns"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Adding a new column ‘salary’</li>
</ol>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">salary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">55000</span>, <span class="fl">50000</span>, <span class="fl">60000</span>, <span class="fl">52000</span>, <span class="fl">58000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age salary</span></span>
<span><span class="co">#&gt; 1  1   Alice  25  55000</span></span>
<span><span class="co">#&gt; 2  2     Bob  30  50000</span></span>
<span><span class="co">#&gt; 3  3 Charlie  22  60000</span></span>
<span><span class="co">#&gt; 4  4   David  28  52000</span></span>
<span><span class="co">#&gt; 5  5     Eva  24  58000</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Removing the ‘salary’ column</li>
</ol>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">salary</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age</span></span>
<span><span class="co">#&gt; 1  1   Alice  25</span></span>
<span><span class="co">#&gt; 2  2     Bob  30</span></span>
<span><span class="co">#&gt; 3  3 Charlie  22</span></span>
<span><span class="co">#&gt; 4  4   David  28</span></span>
<span><span class="co">#&gt; 5  5     Eva  24</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Renaming the ‘name’ column to ‘first_name’</li>
</ol>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">==</span> <span class="st">"name"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"first_name"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id first_name age</span></span>
<span><span class="co">#&gt; 1  1      Alice  25</span></span>
<span><span class="co">#&gt; 2  2        Bob  30</span></span>
<span><span class="co">#&gt; 3  3    Charlie  22</span></span>
<span><span class="co">#&gt; 4  4      David  28</span></span>
<span><span class="co">#&gt; 5  5        Eva  24</span></span></code></pre></div>
</div>
<div id="using-the-dplyr-package-1" class="section level2 unnumbered">
<h2>Using the dplyr package<a class="anchor" aria-label="anchor" href="#using-the-dplyr-package-1"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Adding a new column ‘salary’ using mutate</li>
</ol>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>salary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">55000</span>, <span class="fl">50000</span>, <span class="fl">60000</span>, <span class="fl">52000</span>, <span class="fl">58000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age salary</span></span>
<span><span class="co">#&gt; 1  1   Alice  25  55000</span></span>
<span><span class="co">#&gt; 2  2     Bob  30  50000</span></span>
<span><span class="co">#&gt; 3  3 Charlie  22  60000</span></span>
<span><span class="co">#&gt; 4  4   David  28  52000</span></span>
<span><span class="co">#&gt; 5  5     Eva  24  58000</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Removing the ‘salary’ column using select</li>
</ol>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">salary</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id    name age</span></span>
<span><span class="co">#&gt; 1  1   Alice  25</span></span>
<span><span class="co">#&gt; 2  2     Bob  30</span></span>
<span><span class="co">#&gt; 3  3 Charlie  22</span></span>
<span><span class="co">#&gt; 4  4   David  28</span></span>
<span><span class="co">#&gt; 5  5     Eva  24</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Renaming the ‘name’ column to ‘first_name’ using rename</li>
</ol>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>first_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id first_name age</span></span>
<span><span class="co">#&gt; 1  1      Alice  25</span></span>
<span><span class="co">#&gt; 2  2        Bob  30</span></span>
<span><span class="co">#&gt; 3  3    Charlie  22</span></span>
<span><span class="co">#&gt; 4  4      David  28</span></span>
<span><span class="co">#&gt; 5  5        Eva  24</span></span></code></pre></div>
</div>
<div id="why-use-dyplr" class="section level2 unnumbered">
<h2>Why use dyplr<a class="anchor" aria-label="anchor" href="#why-use-dyplr"><i class="fas fa-link"></i></a>
</h2>
<p>One might think that using pipe operator <code>(%&gt;%)</code> from the <code>magrittr</code> package, prominently used in dplyr and the wider tidyverse is unnecessarily more complex. While it may seem more complex at first, especially to those accustomed to base R functions and syntax, it offers several benefits that can greatly enhance the readability, efficiency, and overall workflow of data analysis. Some reasons to use it are:</p>
<ol style="list-style-type: decimal">
<li>Improved Readability and Clarity</li>
<li>Easier Debugging and Modification</li>
<li>Enhanced Workflow</li>
<li>Consistency and Community Adoption</li>
<li>Efficiency in Writing Code</li>
</ol>
<p>An example of the benefits is seen in more complex operations making them more readable</p>
<p>Let’s just add salary column again.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">$</span><span class="va">salary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">55000</span>, <span class="fl">50000</span>, <span class="fl">60000</span>, <span class="fl">52000</span>, <span class="fl">58000</span><span class="op">)</span></span>
<span><span class="va">subsetting_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span>, <span class="op">-</span><span class="va">salary</span><span class="op">)</span>,</span>
<span>                          first_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span></span>
<span><span class="va">subsetting_data</span></span>
<span><span class="co">#&gt;   id first_name age</span></span>
<span><span class="co">#&gt; 1  1      Alice  25</span></span>
<span><span class="co">#&gt; 2  3    Charlie  22</span></span>
<span><span class="co">#&gt; 3  4      David  28</span></span>
<span><span class="co">#&gt; 4  5        Eva  24</span></span></code></pre></div>
<p>Now, doing it using dplyr</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>salary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">55000</span>, <span class="fl">50000</span>, <span class="fl">60000</span>, <span class="fl">52000</span>, <span class="fl">58000</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">salary</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>first_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span></span>
<span><span class="va">data</span></span>
<span><span class="co">#&gt;   id first_name age</span></span>
<span><span class="co">#&gt; 1  1      Alice  25</span></span>
<span><span class="co">#&gt; 2  3    Charlie  22</span></span>
<span><span class="co">#&gt; 3  4      David  28</span></span>
<span><span class="co">#&gt; 4  5        Eva  24</span></span></code></pre></div>
</div>
<div id="basic-data-summary-and-exploration" class="section level2 unnumbered">
<h2>Basic data summary and exploration<a class="anchor" aria-label="anchor" href="#basic-data-summary-and-exploration"><i class="fas fa-link"></i></a>
</h2>
<p>A very brief summary and data exploration is given below.</p>
<ol style="list-style-type: decimal">
<li>Summary statistics of the data frame</li>
</ol>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;        id        first_name             age       </span></span>
<span><span class="co">#&gt;  Min.   :1.00   Length:4           Min.   :22.00  </span></span>
<span><span class="co">#&gt;  1st Qu.:2.50   Class :character   1st Qu.:23.50  </span></span>
<span><span class="co">#&gt;  Median :3.50   Mode  :character   Median :24.50  </span></span>
<span><span class="co">#&gt;  Mean   :3.25                      Mean   :24.75  </span></span>
<span><span class="co">#&gt;  3rd Qu.:4.25                      3rd Qu.:25.75  </span></span>
<span><span class="co">#&gt;  Max.   :5.00                      Max.   :28.00</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Structure of the data frame</li>
</ol>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    4 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;  $ id        : int  1 3 4 5</span></span>
<span><span class="co">#&gt;  $ first_name: chr  "Alice" "Charlie" "David" "Eva"</span></span>
<span><span class="co">#&gt;  $ age       : num  25 22 28 24</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Average age of the individuals in the data frame</li>
</ol>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">average_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">average_age</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 24.75</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Count of unique names in the data frame</li>
</ol>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unique_names_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">first_name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">unique_names_count</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
</div>
<div id="exploratory-data-analysis" class="section level2 unnumbered">
<h2>Exploratory data analysis<a class="anchor" aria-label="anchor" href="#exploratory-data-analysis"><i class="fas fa-link"></i></a>
</h2>
<p>Exploratory Data Analysis (EDA) is a critical initial step in the data analysis process, where the main characteristics of a dataset are examined to understand its structure, uncover patterns, identify anomalies, and test hypotheses. The goal is to use statistical summaries and visualizations to get a sense of the data, which guides further analysis and modeling decisions. EDA is not about making formal predictions or testing hypotheses but rather about asking questions and seeking insights in a more open-ended, exploratory manner.</p>
<p><strong>Key Components of EDA include:</strong></p>
<ul>
<li><p><strong>Understanding the Distribution</strong> of various variables in the dataset. This involves looking at measures like mean, median, mode, range, variance, and standard deviation, and using visual tools like histograms, box plots, and density plots to understand how the data is spread out.</p></li>
<li><p><strong>Identifying Patterns</strong> and Relationships between variables using scatter plots, pair plots, and correlation matrices. This helps in understanding how variables are related to each other and can guide more complex analyses like regression or classification.</p></li>
<li><p><strong>Detecting Anomalies</strong> such as outliers or unexpected values which might indicate errors in data collection or provide insights into unusual occurrences in the data.</p></li>
<li><p><strong>Cleaning Data</strong> by addressing missing values, duplicate data, and making decisions about how to correct inconsistencies based on the insights gained.</p></li>
<li><p><strong>Transforming Variables</strong> when necessary to make the data more suitable for analysis. This could involve normalizing the data, creating categorical variables from continuous ones, or engineering new variables from existing ones.</p></li>
</ul>
<p><strong>Tools and Techniques</strong></p>
<p>Statistical Summary Functions in R (<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>, etc.) provide quick insights into the basic properties of the data.</p>
<p>Visualization Libraries like <code>ggplot2</code> in R for creating a wide range of plots and charts that reveal the underlying patterns and structures in the data.</p>
<p><strong>Importance of EDA</strong></p>
<ul>
<li><p><strong>Data Understanding:</strong> It ensures that the analyst has a thorough understanding of the dataset’s features, values, and relationships between variables.</p></li>
<li><p><strong>Guiding Hypotheses:</strong> Insights gained during EDA can help form hypotheses for statistical testing and predictive modeling.</p></li>
<li><p><strong>Modeling Strategy:</strong> Identifying the key variables and their relationships helps in choosing appropriate models and techniques for further analysis.</p></li>
</ul>
<p>In summary, EDA is an essential practice in data science for making sense of data, discovering patterns, identifying potential problems, and informing subsequent steps in the analytical process. It blends statistical techniques with visual explorations to create a foundation for any data-driven task.</p>
<p>Now we will explore a dataset from the library <code>AER</code> , and a numeric variable first</p>
</div>
<div id="numeric-variable" class="section level2 unnumbered">
<h2>Numeric Variable<a class="anchor" aria-label="anchor" href="#numeric-variable"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("AER")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">AER</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: car</span></span>
<span><span class="co">#&gt; Loading required package: carData</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'car'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     recode</span></span>
<span><span class="co">#&gt; Loading required package: lmtest</span></span>
<span><span class="co">#&gt; Loading required package: zoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'zoo'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     as.Date, as.Date.numeric</span></span>
<span><span class="co">#&gt; Loading required package: sandwich</span></span>
<span><span class="co">#&gt; Loading required package: survival</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"CPS1985"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    534 obs. of  11 variables:</span></span>
<span><span class="co">#&gt;  $ wage      : num  5.1 4.95 6.67 4 7.5 ...</span></span>
<span><span class="co">#&gt;  $ education : num  8 9 12 12 12 13 10 12 16 12 ...</span></span>
<span><span class="co">#&gt;  $ experience: num  21 42 1 4 17 9 27 9 11 9 ...</span></span>
<span><span class="co">#&gt;  $ age       : num  35 57 19 22 35 28 43 27 33 27 ...</span></span>
<span><span class="co">#&gt;  $ ethnicity : Factor w/ 3 levels "cauc","hispanic",..: 2 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ region    : Factor w/ 2 levels "south","other": 2 2 2 2 2 2 1 2 2 2 ...</span></span>
<span><span class="co">#&gt;  $ gender    : Factor w/ 2 levels "male","female": 2 2 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ occupation: Factor w/ 6 levels "worker","technical",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sector    : Factor w/ 3 levels "manufacturing",..: 1 1 1 3 3 3 3 3 1 3 ...</span></span>
<span><span class="co">#&gt;  $ union     : Factor w/ 2 levels "no","yes": 1 1 1 1 1 2 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ married   : Factor w/ 2 levels "no","yes": 2 2 1 1 2 1 1 1 2 1 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span></span>
<span><span class="co">#&gt;       wage education experience age ethnicity region gender</span></span>
<span><span class="co">#&gt; 1     5.10         8         21  35  hispanic  other female</span></span>
<span><span class="co">#&gt; 1100  4.95         9         42  57      cauc  other female</span></span>
<span><span class="co">#&gt; 2     6.67        12          1  19      cauc  other   male</span></span>
<span><span class="co">#&gt; 3     4.00        12          4  22      cauc  other   male</span></span>
<span><span class="co">#&gt; 4     7.50        12         17  35      cauc  other   male</span></span>
<span><span class="co">#&gt; 5    13.07        13          9  28      cauc  other   male</span></span>
<span><span class="co">#&gt;      occupation        sector union married</span></span>
<span><span class="co">#&gt; 1        worker manufacturing    no     yes</span></span>
<span><span class="co">#&gt; 1100     worker manufacturing    no     yes</span></span>
<span><span class="co">#&gt; 2        worker manufacturing    no      no</span></span>
<span><span class="co">#&gt; 3        worker         other    no      no</span></span>
<span><span class="co">#&gt; 4        worker         other    no     yes</span></span>
<span><span class="co">#&gt; 5        worker         other   yes      no</span></span></code></pre></div>
<p>Obtain the summary statistics of the data frame, check whether it is numeric, get the mean , and variance.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   1.000   5.250   7.780   9.024  11.250  44.500</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9.024064</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 26.41032</span></span></code></pre></div>
<p>Now, visualize the <code>wage</code> distribution</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span>, freq <span class="op">=</span> <span class="cn">FALSE</span>, nclass <span class="op">=</span> <span class="fl">20</span>, col <span class="op">=</span> <span class="st">"light blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-21-1.png" width="672"></div>
</div>
<div id="a-factor-variable" class="section level2 unnumbered">
<h2>A factor variable<a class="anchor" aria-label="anchor" href="#a-factor-variable"><i class="fas fa-link"></i></a>
</h2>
<p>You now explore the occupation variable</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">occupation</span><span class="op">)</span></span>
<span><span class="co">#&gt;     worker  technical   services     office      sales </span></span>
<span><span class="co">#&gt;        156        105         83         97         38 </span></span>
<span><span class="co">#&gt; management </span></span>
<span><span class="co">#&gt;         55</span></span></code></pre></div>
<p>change the names of some of the levels</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">occupation</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"techn"</span>, <span class="st">"mgmt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">occupation</span><span class="op">)</span></span>
<span><span class="co">#&gt;   worker    techn services   office    sales     mgmt </span></span>
<span><span class="co">#&gt;      156      105       83       97       38       55</span></span></code></pre></div>
<p>visualize the distribution</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">occupation</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     worker      techn   services     office      sales </span></span>
<span><span class="co">#&gt; 0.29213483 0.19662921 0.15543071 0.18164794 0.07116105 </span></span>
<span><span class="co">#&gt;       mgmt </span></span>
<span><span class="co">#&gt; 0.10299625</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-24-1.png" width="672"></div>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/pie.html">pie</a></span><span class="op">(</span><span class="va">tab</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html">gray</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">1.0</span>, length <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-24-2.png" width="672"></div>
</div>
<div id="two-factor-variables" class="section level2 unnumbered">
<h2>Two factor variables<a class="anchor" aria-label="anchor" href="#two-factor-variables"><i class="fas fa-link"></i></a>
</h2>
<p>You now explore the factor variables <code>gender</code> and <code>occupation.</code></p>
<p>Use <code><a href="https://rdrr.io/r/base/proportions.html">prop.table()</a></code></p>
<p>The <code><a href="https://rdrr.io/r/base/proportions.html">prop.table()</a></code> function in R is used to compute the proportion of table elements over the margin specified (if any). When applied to a contingency table created by the table() function, it transforms the table’s counts into proportions, making it easier to analyze the relative distribution of frequencies across different categories.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span> <span class="co"># attach the data set to avoid use the operator $</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">occupation</span><span class="op">)</span> <span class="co"># no name_df$name_var necessary</span></span>
<span><span class="co">#&gt;         occupation</span></span>
<span><span class="co">#&gt; gender   worker techn services office sales mgmt</span></span>
<span><span class="co">#&gt;   male      126    53       34     21    21   34</span></span>
<span><span class="co">#&gt;   female     30    52       49     76    17   21</span></span></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">occupation</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;         occupation</span></span>
<span><span class="co">#&gt; gender       worker      techn   services     office</span></span>
<span><span class="co">#&gt;   male   0.23595506 0.09925094 0.06367041 0.03932584</span></span>
<span><span class="co">#&gt;   female 0.05617978 0.09737828 0.09176030 0.14232210</span></span>
<span><span class="co">#&gt;         occupation</span></span>
<span><span class="co">#&gt; gender        sales       mgmt</span></span>
<span><span class="co">#&gt;   male   0.03932584 0.06367041</span></span>
<span><span class="co">#&gt;   female 0.03183521 0.03932584</span></span></code></pre></div>
<p>Now try <code>prop.table(table(gender, occupation), 2)</code></p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">occupation</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># 1 for row , 2 for columns</span></span>
<span><span class="co">#&gt;         occupation</span></span>
<span><span class="co">#&gt; gender      worker     techn  services    office     sales</span></span>
<span><span class="co">#&gt;   male   0.8076923 0.5047619 0.4096386 0.2164948 0.5526316</span></span>
<span><span class="co">#&gt;   female 0.1923077 0.4952381 0.5903614 0.7835052 0.4473684</span></span>
<span><span class="co">#&gt;         occupation</span></span>
<span><span class="co">#&gt; gender        mgmt</span></span>
<span><span class="co">#&gt;   male   0.6181818</span></span>
<span><span class="co">#&gt;   female 0.3818182</span></span></code></pre></div>
<p>You now explore the factor variables gender and occupation.</p>
<p>Do a mosaic plot</p>
<p>A mosaic plot, also known as a Marimekko diagram or a mosaic chart, is a graphical representation of data that allows for the visualization of the proportions or frequencies of categorical variables in a dataset. It’s a type of plot that provides a visual summary of the contingency table associated with two or more categorical variables. Each rectangle (tile) in the mosaic plot represents a combination of category levels from the variables, with the area of the rectangle proportional to the frequency or proportion of observations in that category combination.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">~</span> <span class="va">occupation</span>, data <span class="op">=</span> <span class="va">CPS1985</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-28-1.png" width="672"></div>
<p>Now explore the factor gender and the numeric variable wage.</p>
<p>The <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> function in R is used to apply a function to subsets of a vector, where subsets are defined by some other vector, usually a factor. The basic syntax of tapply() is:</p>
<ul>
<li>X is the object to be split and operated on.</li>
<li>INDEX is the factor or list of factors according to which X is split.</li>
<li>FUN is the function to be applied to each subset of X.</li>
<li>… are optional arguments to FUN.</li>
<li>simplify, when TRUE, tries to simplify the result to a vector, matrix, or higher-dimensional array; when FALSE, the result is a list.</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">wage</span>, <span class="va">gender</span>, <span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt;     male   female </span></span>
<span><span class="co">#&gt; 9.994913 7.878857</span></span></code></pre></div>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">occupation</span><span class="op">)</span>, <span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt;          worker    techn services   office    sales</span></span>
<span><span class="co">#&gt; male   2.100418 2.446640 1.829568 1.955284 2.141071</span></span>
<span><span class="co">#&gt; female 1.667887 2.307509 1.701674 1.931128 1.579409</span></span>
<span><span class="co">#&gt;            mgmt</span></span>
<span><span class="co">#&gt; male   2.447476</span></span>
<span><span class="co">#&gt; female 2.229256</span></span></code></pre></div>
</div>
<div id="a-factor-and-a-numeric-variable" class="section level2 unnumbered">
<h2>A factor and a numeric variable<a class="anchor" aria-label="anchor" href="#a-factor-and-a-numeric-variable"><i class="fas fa-link"></i></a>
</h2>
<p>Explore a factor variable and a numeric variable.
Visualize the distribution of <code>wage</code> per <code>gender</code></p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span>, data <span class="op">=</span> <span class="va">CPS1985</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-31-1.png" width="672"></div>
<p>Now try with</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">occupation</span>, data <span class="op">=</span> <span class="va">CPS1985</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-R-Basic-Part4_files/figure-html/unnamed-chunk-32-1.png" width="672"></div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span> <span class="co"># now detach when work is done</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="part-iii-data-structures.html">Part III: Data Structures</a></div>
<div class="next"><a href="part-v-basic-data-visualization.html">Part V: Basic Data Visualization</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#part-iv-data-manipulation">Part IV: Data Manipulation</a></li>
<li>
<a class="nav-link" href="#subsetting-and-filtering-data">Subsetting and filtering data</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#using-the-dplyr-package">Using the dplyr package</a></li></ul>
</li>
<li><a class="nav-link" href="#adding-removing-and-renaming-columns">Adding, removing, and renaming columns</a></li>
<li><a class="nav-link" href="#using-the-dplyr-package-1">Using the dplyr package</a></li>
<li><a class="nav-link" href="#why-use-dyplr">Why use dyplr</a></li>
<li><a class="nav-link" href="#basic-data-summary-and-exploration">Basic data summary and exploration</a></li>
<li><a class="nav-link" href="#exploratory-data-analysis">Exploratory data analysis</a></li>
<li><a class="nav-link" href="#numeric-variable">Numeric Variable</a></li>
<li><a class="nav-link" href="#a-factor-variable">A factor variable</a></li>
<li><a class="nav-link" href="#two-factor-variables">Two factor variables</a></li>
<li><a class="nav-link" href="#a-factor-and-a-numeric-variable">A factor and a numeric variable</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DilanCaro/R-workshop-John-Jay/blob/master/04-R-Basic-Part4.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DilanCaro/R-workshop-John-Jay/edit/master/04-R-Basic-Part4.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Workshop</strong>" was written by Dilan Morales Caro. It was last built on 2024-04-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
